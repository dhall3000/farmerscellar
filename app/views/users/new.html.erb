<% provide(:title, 'Sign up') %>

<h1>Sign up</h1>

<div class="row">
	<div class="col-md-6 col-md-offset-3">
		<%= form_for @user do |f| %>
		<%= render 'shared/error_messages' %>

		<%= f.label :name %>
		<%= f.text_field :name, class: 'form-control' %>

		<%= f.label :email %>
		<%= f.text_field :email, class: 'form-control' %>

		<%= f.label :password %>
		<%= f.password_field :password, class: 'form-control' %>

		<%= f.label :password_confirmation, "Confirmation" %>
		<%= f.password_field :password_confirmation, class: 'form-control' %>

    <%= f.label :beta, class: "inline" do %>
      <%= f.check_box :beta %>
      <span>Join beta users group</span>      
    <% end %>

    <a id="beta_users_explanation" tabindex="0" data-container="body" data-toggle="popover" data-trigger="focus" data-content="As we grow, our beta users will get a first shot at new features and give feedback about their experiences. This feedback is an integral part of helping Farmer's Cellar take shape. Keep in mind there may be times where we make mistakes as a normal part of growing pains. As always we'll fix any mistakes to your satisfaction and work to not repeat them.">(?)</a>

    <%= f.label :account_type, class: "radio inline" do %>
    <%= f.radio_button :account_type, "0", checked: true %>
    <span>New customer account</span>
    <% end %>

    <%= f.label :account_type, class: "radio inline" do %>
    <%= f.radio_button :account_type, "1" %>
    <span>New producer account</span>
    <% end %>


		<div id="producer_input" hidden="true">
          <%= f.label :farm_name %>
          <%= f.text_field :farm_name, class: 'form-control' %>

          <%= f.label :description, "Description (just tell us a little bit about your business or farm)" %>
          <%= f.text_field :description, class: 'form-control' %>

          <%= f.label :address %>
          <%= f.text_field :address, class: 'form-control' %>
		</div>

		<%= f.submit "Create my account", class: "btn btn-primary" %>

		<% end %>
	</div>
</div>

<script>

$(function(){

  $('#beta_users_explanation').popover();

  $("#user_account_type_0").change(function()
  {
    if ($(this).is(':checked'))
    {
      console.log("customer account sign up checked");
      $("#producer_input").attr("hidden", true);
    }
  });

  $("#user_account_type_1").change(function()
  {
    if ($(this).is(':checked'))
    {
      console.log("producer account sign up checked");
      $("#producer_input").removeAttr("hidden");
    }
  });
});

</script>