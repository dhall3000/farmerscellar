<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :email %>
      <%= f.email_field :email, class: 'form-control' %>

    <%= f.label :beta, class: "inline" do %>
      <%= f.check_box :beta %>
      <span>Join beta users group</span>      
    <% end %>

    <a id="beta_users_explanation" tabindex="0" data-container="body" data-toggle="popover" data-trigger="focus" data-content="As we grow, our beta users will get a first shot at new features and give feedback about their experiences. This feedback is an integral part of helping Farmer's Cellar take shape. Keep in mind there may be times where we make mistakes as a normal part of growing pains. As always we'll fix any mistakes to your satisfaction and work to not repeat them.">(?)</a>
    <p></p>

      <%= f.label :password %>
      <%= f.password_field :password, class: 'form-control' %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation, class: 'form-control' %>

      <% #if this is a farmer we need to put all the fields up for them to edit %>
      <% if @user.account_type == 1 %>
      
        <%= f.label :farm_name %>
        <%= f.text_field :farm_name, class: 'form-control' %>

        <%= f.label :description, "Description (just tell us a little bit about your business or farm)" %>
        <%= f.text_field :description, class: 'form-control' %>

        <%= f.label :address %>
        <%= f.text_field :address, class: 'form-control' %>       
        
        <% save_button_disabled_state = false %>

      <% end %>

      <%= f.submit id: "submit_button", class: "btn btn-primary", disabled: save_button_disabled_state %>
    <% end %>

    <div class="gravatar_edit">
      <%= gravatar_for @user %>
      <a href="http://gravatar.com/emails" target=_blank>change</a>
    </div>
  </div>
</div>

<script>
  $('#beta_users_explanation').popover()
</script>