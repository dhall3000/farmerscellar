<% provide(:title, 'Shop') %>

<h1><%= @food_category.name %></h1>
        
<div class="row">
  <div class="col-xs-12 col-sm-offset-3 col-sm-6">

    <% if @food_category.parent %>      
      
      <%= link_to postings_path(food_category: @food_category.parent.name) do %>
      <span class="glyphicon glyphicon-arrow-left"></span>
      <%= @food_category.parent.name %>
      <% end %>
    <% end %>

    <% if !@food_category.children.any? && !@this_weeks_postings.any? && !@next_weeks_postings.any? && !@future_postings.any? %>
      <p class="text-center">Apparently there is nothing to see in this category</p>
    <% end %>

    <% if @food_category.children.any? %>
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            Sub Categories
          </div>
        </div>
        <div class="panel-body">
          <div class="text-center">
          <% @food_category.children.each do |sub_category| %>              
            <%= link_to sub_category.name, postings_path(food_category: sub_category.name), class: "btn btn-lg btn-primary shopping-buttons" %>
          <% end %>            
          </div>
        </div>        
      </div>
    <% end %>

    <% if @this_weeks_postings.any? %>
      <%= render partial: 'products_panel', locals: { panel_heading: "This Week's Delivery", postings: @this_weeks_postings } %>
    <% end %>

    <% if @next_weeks_postings.any? %>
      <%= render partial: 'products_panel', locals: { panel_heading: "Next Week's Delivery", postings: @next_weeks_postings } %>
    <% end %>

    <% if @future_postings.any? %>
      <%= render partial: 'products_panel', locals: { panel_heading: "Future Delivery", postings: @future_postings } %>
    <% end %>


  </div>
</div>